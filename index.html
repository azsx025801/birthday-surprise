<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>å°å»–ç”Ÿæ—¥é©šå–œå¤§æŒ‘æˆ°ğŸ‰</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- âœ… åœ¨é€™è£¡æ’å…¥ Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <style>
        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            text-align: center;
            background-color: #fffbe6; /* æŸ”å’Œé»ƒè‰²èƒŒæ™¯ */
            margin: 0;
            padding: 20px;
            color: #4b0082; /* æ·±ç´«è‰²å­—é«” */
        }
        h2 {
            color: #6a0dad; /* ç´«è‰²æ¨™é¡Œ */
            font-size: 2.2rem;
        }
        button {
            padding: 12px 24px;
            background: linear-gradient(135deg, #ffde59, #f4a900); /* é»ƒè‰²ç³»æ¼¸è®Š */
            color: #fff;
            font-size: 1.2rem;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
        }
        button:hover {
            background: linear-gradient(135deg, #f4a900, #ffde59);
        }
        .hidden { display: none; }
        
        #wheel3D {
            width: 100%;
            height: 400px;
            margin-top: 20px;
        }

        #welcome p {
            font-size: 1.2rem;
            color: #4b0082;
        }

        #wheel h3 {
            color: #6a0dad;
            font-size: 1.5rem;
        }

        #result {
            margin-top: 15px;
            font-size: 1.3rem;
            font-weight: bold;
            color: #8b5cf6; /* æŸ”å’Œç´«è‰² */
        }
    </style>
</head>

<body>
    <h2>ğŸ‰ å°å»–ç”Ÿæ—¥å¿«æ¨‚ ğŸ‚</h2>
    <div id="welcome">
        <p>æº–å‚™å¥½è¿æ¥å°ˆå±¬å¦³çš„ç”Ÿæ—¥é©šå–œå—ï¼Ÿ</p>
        <button onclick="startQuiz()">ğŸ‘‰ é»æˆ‘é–‹å§‹é©šå–œä¹‹æ—…ï¼</button>
    </div>
    <div id="quiz" class="hidden"></div>
    <div id="wheel" class="hidden">
        <h3>ğŸ¡ æ—‹è½‰çƒé«”æŠ½ç ğŸ¡</h3>
        <div id="wheel3D"></div>
        <button id="spinButton" onclick="spinWheel()">ğŸ¡ é»æ“Šæ—‹è½‰ (<span id="spinsLeft">0</span> æ¬¡æ©Ÿæœƒ)</button>
        <div id="result"></div>
    </div>
<script>

document.addEventListener("DOMContentLoaded", function () {
    let correctAnswers = 0; // è¨˜éŒ„ç­”å°çš„é¡Œæ•¸
    let spinsLeft = 0; // æŠ½çæ¬¡æ•¸

    const quizContainer = document.getElementById("quiz");
    const spinDisplay = document.getElementById("spinsLeft");

    const questions = [
        { q: 'æˆ‘å€‘åœ¨ä¸€èµ·åˆ°2025/3/21ç¸½å…±å¹¾å¤©äº†ï¼Ÿ', opts: shuffle(['1638å¤©', '1720å¤©', '1650å¤©', '2000å¤©']), ans: '1638å¤©' },
        { q: '2020/3/21æˆ‘å€‘åœ¨åšä»€éº¼ï¼Ÿ', opts: shuffle(['åƒç‡’è‚‰ç«¥è©±','çˆ¬å°åŒ—è±¡å±±','é™½æ˜å±±çœ‹å¤œæ™¯','å¥å‰å¥³å‹å®¶ç©æ¡ŒéŠåƒè›‹ç³•']), allCorrect: true },
        { q: '2021/3/21æˆ‘å€‘åœ¨åšä»€éº¼ï¼Ÿ', opts: shuffle(['æ¡ƒåœ’Xæ°´æ—é¤¨åµæ¶','æ—¥æœˆæ½­åº¦å‡','é˜¿é‡Œå±±çœ‹æ—¥å‡º','å°„é£›é¢å»å°æ±']), ans: 'æ¡ƒåœ’Xæ°´æ—é¤¨åµæ¶' },
        { q: '2022/3/21æˆ‘å€‘åœ¨åšä»€éº¼ï¼Ÿ', opts: shuffle(['æ—¥æœˆæ½­åº¦å‡','é˜¿é‡Œå±±çœ‹æ—¥å‡º','æ¡ƒåœ’Xæ°´æ—é¤¨åµæ¶','å°„é£›é¢å»å°æ±']), ans: 'æ—¥æœˆæ½­åº¦å‡' },
        { q: '2023/3/21æˆ‘å€‘åœ¨åšä»€éº¼ï¼Ÿ', opts: shuffle(['å°„é£›é¢å»å°æ±','æ¡ƒåœ’Xæ°´æ—é¤¨åµæ¶','æ—¥æœˆæ½­åº¦å‡','é˜¿é‡Œå±±çœ‹æ—¥å‡º']), ans: 'å°„é£›é¢å»å°æ±' }
    ];

    function shuffle(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    function startQuiz() {
        document.getElementById("welcome").style.display = "none";
        quizContainer.style.display = "block";
        showQuestion(0);
    }

    function showQuestion(index) {
        if (index >= questions.length) {
            endQuiz();
            return;
        }

        const question = questions[index];
        let quizHTML = `<p>${question.q}</p>`;
        
        question.opts.forEach(opt => {
            quizHTML += `<button class="quiz-option" data-answer="${opt}">${opt}</button><br>`;
        });

        quizContainer.innerHTML = quizHTML;

        document.querySelectorAll(".quiz-option").forEach(button => {
            button.addEventListener("click", function () {
                checkAnswer(index, this.getAttribute("data-answer"));
            });
        });
    }

    function checkAnswer(index, answer) {
        let message = "";
        if (questions[index].allCorrect === true || answer === questions[index].ans) {
            message = "ğŸ‰ å°å»–ç­”å°äº†ï¼å¥½è°æ˜å¥½æ£’æ£’ï¼ğŸ¥³";
            correctAnswers++;
        } else {
            message = "âŒ ç­”éŒ¯äº†ï¼åŒ—ä¸ƒğŸ˜‚";
        }

        alert(message);
        showQuestion(index + 1);
    }

    function endQuiz() {
        quizContainer.style.display = "none";
        document.getElementById("wheel").style.display = "block";
        
        spinsLeft = correctAnswers;
        spinDisplay.innerText = spinsLeft;
        console.log(`âœ… å•ç­”çµæŸï¼ç´¯ç© ${spinsLeft} æ¬¡æŠ½çæ©Ÿæœƒ`);

        // **é€™è£¡é–‹å§‹ 3D æŠ½ççƒ**
        start3DWheel();
    }

    window.startQuiz = startQuiz;
});

// âœ… 3D æŠ½ççƒï¼ˆç§»é™¤é‡è¤‡è¼‰å…¥ Three.jsï¼‰
function start3DWheel() {
    console.log("åˆå§‹åŒ– 3D æ–‡å­—çƒ...");
    const container = document.getElementById("wheel3D");
    if (!container) {
        console.error("âŒ ç„¡æ³•æ‰¾åˆ° #wheel3Dï¼Œç¢ºä¿ HTML å·²é¡¯ç¤ºè©²å…ƒç´ ");
        return;
    }
    container.innerHTML = ""; // æ¸…ç©ºå®¹å™¨ï¼Œé¿å…é‡è¤‡è¼‰å…¥
    
    // **è¨­ç½®æ»¿ç‰ˆå¤§å°**
    container.style.position = "fixed";
    container.style.top = "0";
    container.style.left = "0";
    container.style.width = "100vw";
    container.style.height = "100vh";
    container.style.zIndex = "10";
    
    // **åˆå§‹åŒ– Three.js å ´æ™¯**
    let scene = new THREE.Scene();
    let camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    let renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    container.appendChild(renderer.domElement);
    
    // **æ·»åŠ ç‡ˆå…‰**
    const light = new THREE.PointLight(0xffffff, 1, 100);
    light.position.set(10, 10, 20);
    scene.add(light);
    
    // **å»ºç«‹çƒé«” (åŠ åˆ°æ›´å¤§)**
    const geometry = new THREE.SphereGeometry(15, 64, 64); // å¤§çƒé«”å°ºå¯¸
    const material = new THREE.MeshStandardMaterial({ color: 0x4b0082, wireframe: true });
    let sphere = new THREE.Mesh(geometry, material);
    scene.add(sphere);
    
    // **çå“åç¨±**
    const giftItems = [
    "Chanel é¦™æ°´", "YSL å£ç´…", "Prada åŒ…åŒ…", "Dior åŒ–å¦å“", "è˜‹æœè€³æ©Ÿ",
    "é«˜ç´šä¸‹åˆèŒ¶", "é¦¬æ®ºé›", "é ‚ç´šç´…é…’", "æµªæ¼«æ—…éŠ", "å°ˆå±¬æ”å½±å¸«",
    "LV éŒ¢åŒ…", "Gucci æ‰‹éŒ¶", "è¿ªå£«å°¼æ¨‚åœ’ç¥¨", "é«˜ç«¯ SPA", "æ˜Ÿå·´å…‹éš¨è¡Œæ¯",
    "ç¾é‡‘ 5000 å…ƒ", "ç¾é‡‘ 10000 å…ƒ", "ç¾é‡‘ 20000 å…ƒ", "æ—¥æœ¬ä¾†å›æ©Ÿç¥¨", "æ­æ´²å¤¢å¹»ä¹‹æ—…",
    "é¦¬çˆ¾åœ°å¤«é›™äººè¡Œ", "éŸ“åœ‹è³¼ç‰©ä¹‹æ—…", "è±ªè¯éƒµè¼ªå‡æœŸ", "é ­ç­‰è‰™æ©Ÿç¥¨", "è¶…è·‘é«”é©—",
    "ç™¾è²¨å…¬å¸ç¦®åˆ¸", "Apple Watch", "Switch OLED", "PS5 éŠæˆ²æ©Ÿ", "é«˜ç´šç´…é…’å“é…’èª²",
    "ç§äººç®¡å®¶æœå‹™", "äº”æ˜Ÿç´šé…’åº—ä½å®¿", "å€‹äººåŒ–è¨‚è£½é¦™æ°´", "ç’°çƒå½±åŸ VIP ç¥¨", "åœ‹éš›é«˜ç´šè‡ªåŠ©é¤",
    "è±ªè¯éœ²ç‡Ÿé«”é©—", "å°ˆæ¥­æ”å½±å¯«çœŸ", "Helicopter åŸå¸‚å¤œæ™¯éŠè¦½", "é«˜ç´šé¤å»³ä¸»å»šç§æˆ¿èœ",
    "é ‚ç´šç‘œçˆèª²ç¨‹", "æ»‘é›ªåº¦å‡æ‘é›™äººè¡Œ", "é«˜ç´šçš®é©å®šåˆ¶åŒ…", "ä¸€æ—¥è±ªè»Šé«”é©—",
    "æ±äº¬è¿ªå£«å°¼å…¨å¥—è¡Œç¨‹", "é«˜ç«¯ AI æ™ºæ…§å®¶å±…è¨­å‚™", "ç§äººå¥èº«æ•™ç·´ 1 å€‹æœˆ",
    "ç±³å…¶æ—ä¸‰æ˜Ÿæ™šå®´", "é«˜ç«¯ SPA å¹´åº¦æœƒå“¡", "ç’°éŠä¸–ç•Œæ©Ÿç¥¨", "å¤¢å¹»ç§äººå³¶å¶¼å‡æœŸ"
];
shuffle(giftItems);
    
    // **æ·»åŠ  3D æ–‡å­— (æ”¹ç”¨ CanvasTexture ç¹ªè£½ä¸­æ–‡å­—)**
    const textGroup = new THREE.Group();
giftItems.forEach((gift, index) => {
    const textMaterial = new THREE.MeshBasicMaterial({ 
        map: createTextTexture(gift), 
        transparent: true, 
        side: THREE.DoubleSide,  // **è®“æ–‡å­—é›™é¢å¯è¦‹**
        depthTest: false  // **é¿å…è¢«çƒé«”é®æ“‹**
    });
    
    const textGeometry = new THREE.PlaneGeometry(7, 2.5); // **é©ç•¶ç¸®å°æ–‡å­—å°ºå¯¸ï¼Œè®“æ›´å¤šçå“é¡¯ç¤º**
    const textMesh = new THREE.Mesh(textGeometry, textMaterial);

    // **éš¨æ©Ÿåˆ†å¸ƒåœ¨æ•´å€‹çƒé«”è¡¨é¢ï¼Œä½†è·é›¢çƒé«”æ›´è¿‘**
    const theta = Math.acos(2 * Math.random() - 1); // ç·¯åº¦è§’åº¦ï¼ˆ-90 åˆ° 90 åº¦ï¼‰
    const phi = Math.random() * Math.PI * 2; // ç¶“åº¦è§’åº¦ï¼ˆ0 åˆ° 360 åº¦ï¼‰
    const radius = 20; // **ç¸®å°åŠå¾‘ï¼Œè®“æ–‡å­—æ›´é è¿‘çƒé«”ï¼Œæå‡å¯†é›†åº¦**

    textMesh.position.set(
        radius * Math.sin(theta) * Math.cos(phi),
        radius * Math.sin(theta) * Math.sin(phi),
        radius * Math.cos(theta)
    );
    
    textMesh.lookAt(new THREE.Vector3(0, 0, 0)); // **ç¢ºä¿æ–‡å­—æœå‘çƒé«”ä¸­å¿ƒ**
    textMesh.rotation.y += Math.PI; // **ç¿»è½‰æ–‡å­—ï¼Œé¿å…åå‘**
    textGroup.add(textMesh);
});


    scene.add(textGroup);
    
    camera.position.z = 40; // èª¿æ•´ç›¸æ©Ÿè·é›¢ï¼Œç¢ºä¿æ•´å€‹ç•«é¢æ»¿ç‰ˆ
    
    // **å‹•ç•«ï¼šçƒé«” & æ–‡å­—æ—‹è½‰**
    function animate() {
        requestAnimationFrame(animate);
        sphere.rotation.y += 0.005; // æ¸›æ…¢æ—‹è½‰é€Ÿåº¦ï¼Œä½¿è¦–è¦ºæ›´é †æš¢
        textGroup.rotation.y += 0.005; 
        renderer.render(scene, camera);
    }
    animate();
    
    // **ç¢ºä¿è¦–çª—å¤§å°è®ŠåŒ–æ™‚ï¼Œç•«é¢é©æ‡‰**
    window.addEventListener("resize", () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });
}

// **ç¹ªè£½ä¸­æ–‡å­—è²¼åœ–**
function createTextTexture(text) {
    const canvas = document.createElement("canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = 1024; // æé«˜è§£æåº¦
    canvas.height = 256;

    ctx.clearRect(0, 0, canvas.width, canvas.height); // ç¢ºä¿èƒŒæ™¯é€æ˜
    ctx.fillStyle = "black"; // **é»‘è‰²æ–‡å­—ï¼Œç¢ºä¿é«˜å°æ¯”**
    ctx.strokeStyle = "white"; // **ç™½è‰²æé‚Šï¼Œæé«˜å¯è®€æ€§**
    ctx.lineWidth = 8;

    ctx.font = "bold 140px å¾®è»Ÿæ­£é»‘é«”, Arial"; // **åŠ å¤§å­—é«”ï¼Œç¢ºä¿å¯è®€**
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";

    // **å…ˆæé‚Šï¼Œç„¶å¾Œå¡«å……æ–‡å­—**
    ctx.strokeText(text, canvas.width / 2, canvas.height / 2);
    ctx.fillText(text, canvas.width / 2, canvas.height / 2);

    return new THREE.CanvasTexture(canvas);
}

// **ç¢ºä¿ shuffle å¯ç”¨**
function shuffle(array) {
    return array.sort(() => Math.random() - 0.5);
}

window.start3DWheel = start3DWheel;

</script>
</body>
</html>
