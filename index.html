<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <title>å°å»–ç”Ÿæ—¥é©šå–œå¤§æŒ‘æˆ°ğŸ‰</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- âœ… åœ¨é€™è£¡æ’å…¥ Three.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <style>
        body {
            font-family: 'Microsoft JhengHei', Arial, sans-serif;
            text-align: center;
            background-color: #fffbe6; /* æŸ”å’Œé»ƒè‰²èƒŒæ™¯ */
            margin: 0;
            padding: 20px;
            color: #4b0082; /* æ·±ç´«è‰²å­—é«” */
        }
        h2 {
            color: #6a0dad; /* ç´«è‰²æ¨™é¡Œ */
            font-size: 2.2rem;
        }
        button {
            padding: 12px 24px;
            background: linear-gradient(135deg, #ffde59, #f4a900); /* é»ƒè‰²ç³»æ¼¸è®Š */
            color: #fff;
            font-size: 1.2rem;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.2);
        }
        button:hover {
            background: linear-gradient(135deg, #f4a900, #ffde59);
        }
        .hidden { display: none; }
        
        #wheel3D {
            width: 100%;
            height: 400px;
            margin-top: 20px;
        }

        #welcome p {
            font-size: 1.2rem;
            color: #4b0082;
        }

        #wheel h3 {
            color: #6a0dad;
            font-size: 1.5rem;
        }

        #result {
            margin-top: 15px;
            font-size: 1.3rem;
            font-weight: bold;
            color: #8b5cf6; /* æŸ”å’Œç´«è‰² */
        }
#spinButton {
    position: absolute;
    bottom: 50px; /* æ”¾åœ¨ç•«é¢åº•éƒ¨ */
    left: 50%;
    transform: translateX(-50%);
    z-index: 20; /* ç¢ºä¿ä¸è¢«çƒé«”æ“‹ä½ */
}

@keyframes shake {
    0% { transform: translateX(0); }
    20% { transform: translateX(-5px); }
    40% { transform: translateX(5px); }
    60% { transform: translateX(-5px); }
    80% { transform: translateX(5px); }
    100% { transform: translateX(0); }
}

@keyframes scaleUp {
    0% { transform: scale(1); }
    50% { transform: scale(1.2); }
    100% { transform: scale(1); }
}

.shake {
    animation: shake 0.5s ease-in-out;
}

.scaleUp {
    animation: scaleUp 0.5s ease-in-out;
}


    </style>
</head>

<body>
    <h2>ğŸ‰ å°å»–ç”Ÿæ—¥å¿«æ¨‚ ğŸ‚</h2>
    <div id="welcome">
        <p>æº–å‚™å¥½è¿æ¥å°ˆå±¬å¦³çš„ç”Ÿæ—¥é©šå–œå—ï¼Ÿ</p>
        <button onclick="startQuiz()">ğŸ‘‰ é»æˆ‘é–‹å§‹é©šå–œä¹‹æ—…ï¼</button>
    </div>
    <div id="quiz" class="hidden"></div>
    <div id="wheel" class="hidden">
        <h3>ğŸ¡ æ—‹è½‰çƒé«”æŠ½ç ğŸ¡</h3>
        <div id="wheel3D"></div>
        <button id="spinButton" onclick="spinWheel()">ğŸ¡ é»æ“Šæ—‹è½‰ (<span id="spinsLeft">0</span> æ¬¡æ©Ÿæœƒ)</button>
        <div id="result"></div>
    </div>
<script>
    let correctAnswers = 0; // è¨˜éŒ„ç­”å°çš„é¡Œæ•¸
    let spinsLeft = 0; // æŠ½çæ¬¡æ•¸
document.addEventListener("DOMContentLoaded", function () {

    const quizContainer = document.getElementById("quiz");
    const spinDisplay = document.getElementById("spinsLeft");

    const questions = [
        { q: 'æˆ‘å€‘åœ¨ä¸€èµ·åˆ°2025/3/21ç¸½å…±å¹¾å¤©äº†ï¼Ÿ', opts: shuffle(['1638å¤©', '1720å¤©', '1650å¤©', '2000å¤©']), ans: '1638å¤©' },
        { q: '2020/3/21æˆ‘å€‘åœ¨åšä»€éº¼ï¼Ÿ', opts: shuffle(['åƒç‡’è‚‰ç«¥è©±','çˆ¬å°åŒ—è±¡å±±','é™½æ˜å±±çœ‹å¤œæ™¯','å¥å‰å¥³å‹å®¶ç©æ¡ŒéŠåƒè›‹ç³•']), allCorrect: true },
        { q: '2021/3/21æˆ‘å€‘åœ¨åšä»€éº¼ï¼Ÿ', opts: shuffle(['æ¡ƒåœ’Xæ°´æ—é¤¨åµæ¶','æ—¥æœˆæ½­åº¦å‡','é˜¿é‡Œå±±çœ‹æ—¥å‡º','å°„é£›é¢å»å°æ±']), ans: 'æ¡ƒåœ’Xæ°´æ—é¤¨åµæ¶' },
        { q: '2022/3/21æˆ‘å€‘åœ¨åšä»€éº¼ï¼Ÿ', opts: shuffle(['æ—¥æœˆæ½­åº¦å‡','é˜¿é‡Œå±±çœ‹æ—¥å‡º','æ¡ƒåœ’Xæ°´æ—é¤¨åµæ¶','å°„é£›é¢å»å°æ±']), ans: 'æ—¥æœˆæ½­åº¦å‡' },
        { q: '2023/3/21æˆ‘å€‘åœ¨åšä»€éº¼ï¼Ÿ', opts: shuffle(['å°„é£›é¢å»å°æ±','æ¡ƒåœ’Xæ°´æ—é¤¨åµæ¶','æ—¥æœˆæ½­åº¦å‡','é˜¿é‡Œå±±çœ‹æ—¥å‡º']), ans: 'å°„é£›é¢å»å°æ±' }
    ];

    function shuffle(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    function startQuiz() {
        document.getElementById("welcome").style.display = "none";
        quizContainer.style.display = "block";
        showQuestion(0);
    }

    function showQuestion(index) {
        if (index >= questions.length) {
            endQuiz();
            return;
        }

        const question = questions[index];
        let quizHTML = `<p>${question.q}</p>`;
        
        question.opts.forEach(opt => {
            quizHTML += `<button class="quiz-option" data-answer="${opt}">${opt}</button><br>`;
        });

        quizContainer.innerHTML = quizHTML;

        document.querySelectorAll(".quiz-option").forEach(button => {
            button.addEventListener("click", function () {
                checkAnswer(index, this.getAttribute("data-answer"));
            });
        });
    }

    function checkAnswer(index, answer) {
        let message = "";
        if (questions[index].allCorrect === true || answer === questions[index].ans) {
            message = "ğŸ‰ å°å»–ç­”å°äº†ï¼å¥½è°æ˜å¥½æ£’æ£’ï¼ğŸ¥³";
            correctAnswers++;
        } else {
            message = "âŒ ç­”éŒ¯äº†ï¼åŒ—ä¸ƒğŸ˜‚";
        }

        alert(message);
        showQuestion(index + 1);
    }

    function endQuiz() {
    quizContainer.style.display = "none";
    document.getElementById("wheel").style.display = "block";

    console.log(`ğŸ¯ å•ç­”çµæŸï¼ç­”å°é¡Œæ•¸ï¼š${correctAnswers}`); // ç¢ºä¿é€™è£¡æ•¸æ“šæ˜¯æ­£ç¢ºçš„
    spinsLeft = correctAnswers; // è¨­å®šæŠ½çæ¬¡æ•¸
    spinDisplay.innerText = spinsLeft;
    console.log(`âœ… è¨­å®šæŠ½çæ¬¡æ•¸ï¼š${spinsLeft}`);

    start3DWheel();
}

    window.startQuiz = startQuiz;
});

// âœ… 3D æŠ½ççƒï¼ˆç§»é™¤é‡è¤‡è¼‰å…¥ Three.jsï¼‰
function start3DWheel() {
    console.log("åˆå§‹åŒ– 3D æ–‡å­—çƒ...");
    const container = document.getElementById("wheel3D");
    if (!container) {
        console.error("âŒ ç„¡æ³•æ‰¾åˆ° #wheel3Dï¼Œç¢ºä¿ HTML å·²é¡¯ç¤ºè©²å…ƒç´ ");
        return;
    }
    container.innerHTML = ""; // æ¸…ç©ºå®¹å™¨ï¼Œé¿å…é‡è¤‡è¼‰å…¥
    
    // **è¨­ç½®æ»¿ç‰ˆå¤§å°**
    container.style.position = "fixed";
    container.style.top = "0";
    container.style.left = "0";
    container.style.width = "100vw";
    container.style.height = "100vh";
    container.style.zIndex = "10";
    
    // **åˆå§‹åŒ– Three.js å ´æ™¯**
    let scene = new THREE.Scene();
    let camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    let renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    container.appendChild(renderer.domElement);
    
    // **æ·»åŠ ç‡ˆå…‰**
    const light = new THREE.PointLight(0xffffff, 1, 100);
    light.position.set(10, 10, 20);
    scene.add(light);
    
    // **å»ºç«‹çƒé«” (åŠ åˆ°æ›´å¤§)**
    const geometry = new THREE.SphereGeometry(15, 64, 64); // å¤§çƒé«”å°ºå¯¸
    const material = new THREE.MeshStandardMaterial({ color: 0x4b0082, wireframe: true });
    let sphere = new THREE.Mesh(geometry, material);
    scene.add(sphere);
    
    // **çå“åç¨±**
const giftItems = [
    "Chanel é¦™æ°´", "YSL å£ç´…", "Prada åŒ…åŒ…", "Dior åŒ–å¦å“", "Jo Malone é¦™æ°´",
    "Tiffany & Co. é …éŠ", "Dior è­·è†šå“", "La Mer é¢éœœ", "GUCCI é¦™æ°´", "Tom Ford å£ç´…",
    "SK-II ç²¾è¯æ¶²", "Charlotte Tilbury çœ¼å½±ç›¤", "Fenty Beauty åŒ–å¦çµ„åˆ", "EstÃ©e Lauder ç²¾è¯",
    "HermÃ¨s çµ²å·¾", "Louis Vuitton æ‰‹æåŒ…", "Cartier æˆ’æŒ‡", "Bvlgari æ‰‹ç’°", "ChloÃ© é¦™æ°´",
    "æ˜Ÿå·´å…‹å¹´åº¦å’–å•¡åˆ¸", "è¿ªå£«å°¼æ¨‚åœ’ VIP ç¥¨", "ç±³å…¶æ—ä¸‰æ˜Ÿæ™šå®´", "é«˜ç«¯ SPA æœƒå“¡", "é¦¬æ®ºé›å¥—é¤",
    "ç¾é‡‘77777å…ƒ", "é«˜ç´šç´…é…’", "ç¾é‡‘3è¬å…ƒ", "ç¾é‡‘6666å…ƒ", "å°ˆå±¬ç¾ç”²è¨­è¨ˆ",
    "Prada å¤ªé™½çœ¼é¡", "Guerlain èœ‚ç‹ä¹³è­·è†šå“", "Dior é™é‡ç‰ˆå½©å¦", "Jo Malone æ“´é¦™çµ„",
    "æ—¥æœ¬æº«æ³‰åº¦å‡", "éŸ“åœ‹ç¾å®¹ç™‚ç¨‹", "æ­æ´²åŸå ¡ä¹‹æ—…", "é¦¬çˆ¾åœ°å¤«é›™äººè¡Œ", "å·´é»æµªæ¼«ä¹‹æ—…",
    "å³‡é‡Œå³¶è±ªè¯åº¦å‡", "ç‘å£«æ»‘é›ªé«”é©—", "ç¾©å¤§åˆ©é›™äººæ©Ÿç¥¨", "ç´ç´„é›™äººæ©Ÿç¥¨",
    "ç¾é‡‘ 5000 å…ƒ", "ç¾é‡‘ 10000 å…ƒ", "ç¾é‡‘ 20000 å…ƒ", "ç™¾è²¨å…¬å¸ç¦®åˆ¸ 5000 å…ƒ", "ç™¾è²¨å…¬å¸ç¦®åˆ¸ 10000 å…ƒ",
    "é«˜ç´šç å¯¶", "å¯«çœŸç…§ä¸€çµ„", "è¡£æœéš¨ä¾¿è²·", "å°ˆæ¥­æ”å½±å¯«çœŸ", "ç¾é‡‘åè¬å…ƒ",
    "Chanel é«˜ç«¯è¨‚è£½æ‰‹è¢‹", "Dior é«˜ç´šå®šè£½ç¦®æœ", "LV é™é‡æ¬¾çš®å¤¾", "HermÃ¨s é™é‡ç‰ˆåŒ…åŒ…",
    "Burberry é¢¨è¡£", "Tiffany & Co. é«˜ç«¯æ‰‹é²", "BVLGARI é ‚ç´šç å¯¶", "Fendi é‹å±¥",
    "æ­æ´²äº”æ˜Ÿç´šé…’åº—ä½å®¿", "å€«æ•¦ä¹‹æ—…", "è±ªè¯éƒµè¼ªå‡æœŸ", "ç’°éŠä¸–ç•Œæ©Ÿç¥¨", "ç¾é‡‘88888å…ƒ",
    "ç§äººå»šå¸«è¨‚è£½é¤é»", "é«˜ç´šé¦™æ°›", "æ—¥æœ¬éŠ€åº§è³¼ç‰©è¡Œç¨‹", "è¬è¬æƒ é¡§", "ç¾é‡‘ä¸€è¬å…ƒ",
    "ç‘å£«ä¹‹æ—…", "è±ªè¯é«˜éµæ—…è¡Œ", "å°ˆæ¥­åŒ–å¦èª²ç¨‹", "é†«ç¾è¨ºæ‰€å¥—é¤", "ç²¾å“éš¨ä¾¿æŒ‘",
    "é«˜ç«¯ SPA å¹´å¡", "æ˜æ˜Ÿç´šè­·è†šç™‚ç¨‹", "ç¾é‡‘20è¬å…ƒ", "ç¥ç§˜ç¦®ç‰©å¤§ç", "æ±äº¬å¥¢è¯è³¼ç‰©ä¹‹æ—…",
    "é«”é©—ç›´å‡æ©Ÿ", "è¶…è±ªè¯éœ²ç‡Ÿé«”é©—", "å¥¢è¯æ°´ç™‚å‡æœŸ", "æœæ‹œå¥¢è¯ä¹‹æ—…", "ç§äººå³¶å¶¼åº¦å‡",
    "é«˜ç´šä¸‹åˆèŒ¶ä¸€ä»½", "ç¾é‡‘äº”è¬å…ƒ", "ç²¾å“å’–å•¡æ©Ÿ", "é«˜ç«¯ç§äººæ•™ç·´å¥èº«èª²ç¨‹", "ç¾é‡‘66666å…ƒ",
    "é«˜ç«¯è­·è†šç™‚ç¨‹", "ç‘å£«ç§äººæ»‘é›ªèª²ç¨‹", "ç¶­ä¹Ÿç´éŸ³æ¨‚æœƒä¹‹æ—…", "æ³•åœ‹é›™äººè¡Œ",
    "ç¾é‡‘ä¸€ç™¾å…ƒ", "æ‘©æ´›å“¥å¤¢å¹»ä¹‹æ—…", "å¤å¨å¤·è±ªè¯åº¦å‡", "æ¥µå…‰ä¹‹æ—… VIP ç¥¨"
];

shuffle(giftItems);
    
    // **æ·»åŠ  3D æ–‡å­— (æ”¹ç”¨ CanvasTexture ç¹ªè£½ä¸­æ–‡å­—)**
    const textGroup = new THREE.Group();
const positions = []; // å­˜å„²å·²æ“ºæ”¾çš„æ–‡å­—ä½ç½®
const minDistance = 5; // **æœ€å°é–“è·ï¼Œé˜²æ­¢é‡ç–Š**

giftItems.forEach((gift, index) => {
    // **å‹•æ…‹èª¿æ•´æ–‡å­—å¤§å°**
    const textLength = gift.length;
    const planeWidth = Math.min(10, textLength * 0.6); // æ ¹æ“šå­—æ•¸å‹•æ…‹èª¿æ•´å¯¬åº¦
    const planeHeight = 3; // é«˜åº¦å›ºå®š

    const textMaterial = new THREE.MeshBasicMaterial({ 
        map: createTextTexture(gift, planeWidth), 
        transparent: true, 
        side: THREE.DoubleSide,  
        depthTest: false  
    });

    const textGeometry = new THREE.PlaneGeometry(planeWidth, planeHeight);
    const textMesh = new THREE.Mesh(textGeometry, textMaterial);

    let positionFound = false;
    let newPosition;

    for (let attempts = 0; attempts < 100; attempts++) {
        const u = Math.random();
        const v = Math.random();
        const theta = Math.acos(2 * u - 1);
        const phi = 2 * Math.PI * v;
        const radius = 18;

        newPosition = new THREE.Vector3(
            radius * Math.sin(theta) * Math.cos(phi),
            radius * Math.sin(theta) * Math.sin(phi),
            radius * Math.cos(theta)
        );

        let tooClose = positions.some(pos => newPosition.distanceTo(pos) < minDistance);

        if (!tooClose) {
            positionFound = true;
            break;
        }
    }

    if (positionFound) {
        textMesh.position.copy(newPosition);
        positions.push(newPosition);
        textMesh.lookAt(new THREE.Vector3(0, 0, 0));
        textMesh.rotation.y += Math.PI; 
        textGroup.add(textMesh);
    }
});




    scene.add(textGroup);
    
    camera.position.z = 40; // èª¿æ•´ç›¸æ©Ÿè·é›¢ï¼Œç¢ºä¿æ•´å€‹ç•«é¢æ»¿ç‰ˆ
    
    // **å‹•ç•«ï¼šçƒé«” & æ–‡å­—æ—‹è½‰**
    function animate() {
        requestAnimationFrame(animate);
        sphere.rotation.y += 0.005; // æ¸›æ…¢æ—‹è½‰é€Ÿåº¦ï¼Œä½¿è¦–è¦ºæ›´é †æš¢
        textGroup.rotation.y += 0.005; 
        renderer.render(scene, camera);
    }
    animate();
    
    // **ç¢ºä¿è¦–çª—å¤§å°è®ŠåŒ–æ™‚ï¼Œç•«é¢é©æ‡‰**
    window.addEventListener("resize", () => {
        camera.aspect = window.innerWidth / window.innerHeight;
        camera.updateProjectionMatrix();
        renderer.setSize(window.innerWidth, window.innerHeight);
    });
}

// **ç¹ªè£½ä¸­æ–‡å­—è²¼åœ–**
function createTextTexture(text) {
    const canvas = document.createElement("canvas");
    const ctx = canvas.getContext("2d");
    canvas.width = 1024;
    canvas.height = 400; // **åŠ å¤§é«˜åº¦ï¼Œå…è¨±æ›´å¤§çš„æ–‡å­—**

    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.fillStyle = "rgb(255, 215, 0)"; // **é‡‘é»ƒè‰²å­—é«”**
    ctx.strokeStyle = "black"; // **é»‘è‰²æé‚Š**
    ctx.lineWidth = 10; // **åŠ ç²—é‚Šæ¡†ï¼Œæé«˜å¯è®€æ€§**

    let fontSize = 150;
    if (text.length > 10) fontSize = 130; // **å¦‚æœæ–‡å­—å¤ªé•·ï¼Œç¨å¾®ç¸®å°**
    if (text.length > 15) fontSize = 110;  // **æ›´é•·çš„è©±é€²ä¸€æ­¥ç¸®å°**

    ctx.font = `bold ${fontSize}px å¾®è»Ÿæ­£é»‘é«”, Arial`;
    ctx.textAlign = "center";
    ctx.textBaseline = "middle";

    // **è‡ªå‹•æ›è¡Œ**
    let maxWidth = 900; // **æœ€å¤§è¡Œå¯¬ï¼Œç¢ºä¿æ‰‹æ©Ÿä¸Šå¯è®€**
    let lines = [];
    let words = text.split(" ");
    let line = "";

    for (let word of words) {
        let testLine = line + word + " ";
        let metrics = ctx.measureText(testLine);
        if (metrics.width > maxWidth && line !== "") {
            lines.push(line);
            line = word + " ";
        } else {
            line = testLine;
        }
    }
    lines.push(line); // åŠ å…¥æœ€å¾Œä¸€è¡Œ

    // **ç¹ªè£½å¤šè¡Œæ–‡å­—**
    let startY = canvas.height / 2 - ((lines.length - 1) * fontSize * 0.6);
    for (let i = 0; i < lines.length; i++) {
        ctx.strokeText(lines[i], canvas.width / 2, startY + i * fontSize * 1.2);
        ctx.fillText(lines[i], canvas.width / 2, startY + i * fontSize * 1.2);
    }

    return new THREE.CanvasTexture(canvas);
}
// **ç¢ºä¿ shuffle å¯ç”¨**
function shuffle(array) {
    return array.sort(() => Math.random() - 0.5);
}

window.start3DWheel = start3DWheel;
function spinWheel() {
    let spinButton = document.getElementById("spinButton");

    if (spinsLeft <= 0) {
        alert("âŒ æ²’æœ‰æŠ½çæ©Ÿæœƒäº†ï¼");
        return;
    }

    // **æŒ‰éˆ•å‹•ç•«ï¼ˆæ™ƒå‹• + æ”¾å¤§ç¸®å°ï¼‰**
    spinButton.classList.add("shake");
    spinButton.classList.add("scaleUp");

    // **0.5 ç§’å¾Œç§»é™¤å‹•ç•«**
    setTimeout(() => {
        spinButton.classList.remove("shake");
        spinButton.classList.remove("scaleUp");
    }, 500);

    let remainingSpins = spinsLeft;
    spinsLeft = Math.max(0, spinsLeft - 1);
    document.getElementById("spinsLeft").innerText = spinsLeft;

    let isLastSpin = (remainingSpins === 1);
    let resultText = isLastSpin ? "ğŸ æ­å–œä½ ç²å¾—ï¼šç¥ç§˜ç¦®ç‰©å¤§ç ğŸ‰" : "ğŸ˜¢ è¬è¬æƒ é¡§ï¼Œè«‹å†æ¥å†å²ï¼";

    // **é˜²æ­¢é€£é»**
    spinButton.disabled = true;

    // **æ¨¡æ“¬æ—‹è½‰å‹•ç•«ï¼ˆé»‘ç®±ä½œæ¥­ï¼‰**
    let spinDuration = 2000; // æ—‹è½‰ 2 ç§’
    setTimeout(() => {
        alert(resultText); // å½ˆå‡ºä¸­ççµæœ
        document.getElementById("result").innerText = resultText;
        
        // **å¦‚æœé‚„æœ‰æ©Ÿæœƒï¼Œå•Ÿç”¨æŒ‰éˆ•**
        if (spinsLeft > 0) {
            spinButton.disabled = false;
        }
    }, spinDuration);
}


</script>
</body>
</html>
